{
    "collab_server" : "",
    "contents" : "# shift <- read_csv(\"C:/Bruker/TopSpin3.2/data/SATIN_Beta-glucan/data_analysis_r/session_2_associated_data/shift.csv\")\nshift=savedreactivedata$final_output$shift\n# shift=shift[,-which(is.na(shift[1,]))]\n# shift=data.matrix(shift[,-1])\nmatr=matr3=matrix(NA,nrow(shift),ncol(shift))\nfor (i in seq(ncol(shift))) {\n  \n  mm=rep(NA,ncol(shift))\n  for (j in 1:ncol(shift)) mm[j]=tryCatch(summary(lmrob(shift[,i]~shift[,j]))$sigma,error=function(e)NaN)\n  \n  # sen=sapply(2:20,function(x)summary(lmrob(shift[,i]~apply(shift[,order(mm)[1:x]],1,mean)))$sigma)\n  sen2=rep(NA,ncol(shift))\n  for (j in 2:ncol(shift)) sen2[j]=tryCatch(summary(lmrob(shift[,i]~apply(shift[,order(mm)[1:j]],1,median)))$sigma,error=function(e)NaN)\n  # sen2=sapply(2:20,function(x)summary(lmrob(shift[,i]~apply(shift[,order(mm)[1:x]],1,median)))$sigma)\n  if (all(is.na(sen2))) next\n  \n  def=predict(lmrob(shift[,i]~apply(shift[,order(mm)[1:which.min(sen2)]],1,median)),as.data.frame(shift[,i]))\n  \n  matr[,i]=shift[,i]-def\n  matr3[,i]=def\n}\n\n\n# matr2=matr/apply(abs(matr),2,median)\nll=apply(abs(matr),2,function(x)quantile(x,0.9,na.rm=T))\nind=is.na(ll)\n\nll[ind]=savedreactivedata$ROI_data[ind,7]\nmatr3[,ind]=t(replicate(nrow(shift),so))\n\n\n# shift2=shift[1:20,]\n# matr=matr3=matrix(NA,nrow(shift2),ncol(shift2))\n# for (i in seq(ncol(shift2))) {\n#   \n#   mm=rep(NA,ncol(shift2))\n#   for (j in 1:ncol(shift2)) mm[j]=tryCatch(summary(lmrob(shift2[,i]~shift2[,j]))$sigma,error=function(e)NaN)\n#   \n#   # sen=sapply(2:20,function(x)summary(lmrob(shift2[,i]~apply(shift2[,order(mm)[1:x]],1,mean)))$sigma)\n#   sen2=rep(NA,ncol(shift2))\n#   for (j in 2:ncol(shift2)) sen2[j]=tryCatch(summary(lmrob(shift2[,i]~apply(shift2[,order(mm)[1:j]],1,median)))$sigma,error=function(e)NaN)\n#   # sen2=sapply(2:20,function(x)summary(lmrob(shift2[,i]~apply(shift2[,order(mm)[1:x]],1,median)))$sigma)\n#   \n#   def=predict(lmrob(shift2[,i]~apply(shift2[,order(mm)[1:which.min(sen2)]],1,median)),as.data.frame(shift2[,i]))\n#   \n#   matr[,i]=shift2[,i]-def\n#   matr3=def\n# }\n# \n# \n# matr2=matr/apply(abs(matr),2,median)\n# \n# ll2=apply(abs(matr),2,function(x)quantile(x,0.9))",
    "created" : 1493907958657.000,
    "dirty" : true,
    "encoding" : "",
    "folds" : "",
    "hash" : "1972625114",
    "id" : "EAFCB1DA",
    "lastKnownWriteTime" : 5292976843906638626,
    "last_content_update" : 1493992718714,
    "path" : null,
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled3"
    },
    "relative_order" : 15,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}